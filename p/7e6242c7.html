<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java之IO流 | 凉月の博客</title><meta name="author" content="凉月"><meta name="copyright" content="凉月"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Java面向对象">
<meta property="og:type" content="article">
<meta property="og:title" content="Java之IO流">
<meta property="og:url" content="https://fulsun.github.io/p/7e6242c7">
<meta property="og:site_name" content="凉月の博客">
<meta property="og:description" content="Java面向对象">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fulsun.github.io/medias/featureimages/013.jpg">
<meta property="article:published_time" content="2018-08-21T01:08:28.000Z">
<meta property="article:modified_time" content="2024-10-17T07:06:55.362Z">
<meta property="article:author" content="凉月">
<meta property="article:tag" content="凉月">
<meta property="article:tag" content="凉月文">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="web网站">
<meta property="article:tag" content="经验分享">
<meta property="article:tag" content="hexo">
<meta property="article:tag" content="个人博客">
<meta property="article:tag" content="生活记录等">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fulsun.github.io/medias/featureimages/013.jpg"><link rel="shortcut icon" href="/medias/favicon.png"><link rel="canonical" href="https://fulsun.github.io/p/7e6242c7"><link rel="preconnect" href="//unpkg.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"至上次更新后的","messageNext":"天,文章内容可能已过时。"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 凉月","link":"链接: ","source":"来源: 凉月の博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java之IO流',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-17 07:06:55'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/avatar.jpg" onerror="onerror=null;src='/medias/detail/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heartbeat"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-list"></i><span> 联系</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-user-circle"></i><span> 博主</span></a></li><li><a class="site-page child" href="/contact"><i class="fa-fw fas fa-comments"></i><span> 留言</span></a></li><li><a class="site-page child" href="/journal"><i class="fa-fw fas fa-cogs"></i><span> 日志</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-list"></i><span> JS动画</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/snake/"><i class="fa-fw fas fa-gamepad"></i><span> 贪吃蛇</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/medias/featureimages/013.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="凉月の博客"><span class="site-name">凉月の博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heartbeat"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-camera-retro"></i><span> 相册</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-list"></i><span> 联系</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-user-circle"></i><span> 博主</span></a></li><li><a class="site-page child" href="/contact"><i class="fa-fw fas fa-comments"></i><span> 留言</span></a></li><li><a class="site-page child" href="/journal"><i class="fa-fw fas fa-cogs"></i><span> 日志</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-list"></i><span> JS动画</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/snake/"><i class="fa-fw fas fa-gamepad"></i><span> 贪吃蛇</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java之IO流</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2018-08-21T01:08:28.000Z" title="发表于 2018-08-21 01:08:28">2018-08-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-17T07:06:55.362Z" title="更新于 2024-10-17 07:06:55">2024-10-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JavaSE/">JavaSE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>36分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java之IO流"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><span id="more"></span>

<h2 id="IO的基本概述"><a href="#IO的基本概述" class="headerlink" title="IO的基本概述"></a>IO的基本概述</h2><ul>
<li>IO流概述<ul>
<li>IO流用来处理设备之间的数据传输，比如常见存储文件</li>
<li>上传文件和下载文件</li>
</ul>
</li>
<li>IO流前奏<ul>
<li>讲解IO流之前为什么先讲解异常和File类呢?</li>
<li>因为File表示的是IO流将来要操作的文件，所以我们需要学习File类。</li>
<li>而常见操作文件无非就是上传文件和下载文件，在这个操作的过程中可能出现问题，</li>
<li>出现问题后，我们需要对对应的代码进行处理。所以我们需要学习异常。</li>
</ul>
</li>
<li>IO流整体学习知识体系<ul>
<li>IO流概述<ul>
<li>IO流用来处理设备之间的数据传输</li>
<li>Java对数据的操作是通过流的方式</li>
<li>Java用于操作流的对象都在IO包中</li>
</ul>
</li>
<li>IO流分类<ul>
<li>a:按照数据流向<ul>
<li>输入流 读入数据 输硬盘 —-&gt; 内存</li>
<li>输出流 写出数据 内存 —-&gt; 硬盘</li>
</ul>
</li>
<li>b:按照数据类型<ul>
<li>字节流</li>
<li>字符流</li>
<li>什么情况下使用哪种流呢?</li>
<li>如果数据所在的文件通过windows自带的记事本打开并能读懂里面的内容，就用字符流。其他用字节流。</li>
<li>如果你什么都不知道，就用字节流</li>
</ul>
</li>
<li>字节流和字符流<ul>
<li>字节流<ul>
<li>字节输入流 InputStream 读</li>
<li>字节输出流 OutputStream 写</li>
</ul>
</li>
<li>字符流<ul>
<li>字符输入流 Reader 读</li>
<li>字符输出流 Writer 写</li>
</ul>
</li>
<li>上面的4个流对象都是抽象类,我们不能直接使用,我们需要使用子类</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="IO流的概念"><a href="#IO流的概念" class="headerlink" title="IO流的概念"></a>IO流的概念</h2><ul>
<li>Java的IO流是实现输入&#x2F;输出的基础<ul>
<li>它可以方便地实现数据的输入&#x2F;输出操作，在Java中把不同的输入&#x2F;输出源抽象表述为”流”。</li>
<li>Java在<code>java.io</code>包定义多个流类型来实现输入和输出</li>
</ul>
</li>
<li>流:可以理解成为一组有顺序的、有起点、有终点的动态数据集合<ul>
<li>有起点和终点的字节集合，是对数据传输的总称或抽象。即数据在两设备间的传输称为流，流的本质是数据传输，根据数据传输特性将流抽象为各种类，方便更直观的进行数据操作。</li>
</ul>
</li>
<li><strong>流有输入和输出，输入时是流从数据源流向程序。输出时是流从程序传向数据源，而数据源可以是内存，文件，网络或程序等。</strong></li>
</ul>
<h2 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h2><ul>
<li><p>根据流的流向以及操作的数据单元不同，将流分为了四种类型，每种类型对应一种抽象基类。</p>
</li>
<li><p>这四种抽象基类分别为：InputStream,Reader,OutputStream以及Writer。</p>
</li>
<li><p>四种基类下，对应不同的实现类，具有不同的特性。在这些实现类中，又可以分为节点流和处理流。下面就是整个由着四大基类支撑下，整个IO流的框架图。</p>
<p><img src= "/medias/detail/load.gif" data-lazy-src="/p/7e6242c7/dc5326a9f1688a5f24ee5a295be5cea2.png"></p>
</li>
</ul>
<h3 id="输入流和输出流"><a href="#输入流和输出流" class="headerlink" title="输入流和输出流"></a>输入流和输出流</h3><ul>
<li>根据数据流向不同分为：输入流和输出流。<ul>
<li>输入流: 只能从中读取数据，而不能向其写入数据。</li>
<li>输出流：只能向其写入数据，而不能从中读取数据。</li>
</ul>
</li>
</ul>
<h3 id="节点流和处理流"><a href="#节点流和处理流" class="headerlink" title="节点流和处理流"></a>节点流和处理流</h3><ul>
<li><p>按照流的角色来分，可以分为节点流和处理流。</p>
</li>
<li><p>可以从&#x2F;向一个特定的IO设备（如磁盘、网络）读&#x2F;写数据的流，称为节点流，节点流也被成为低级流。</p>
</li>
<li><p>处理流是对一个已存在的流进行连接或封装，通过封装后的流来实现数据读&#x2F;写功能，处理流也被称为高级流</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//节点流，直接传入的参数是IO设备</span></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;test.txt&quot;</span>);</span><br><span class="line"><span class="comment">//处理流，直接传入的参数是流对象</span></span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(fis);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>当使用处理流进行输入&#x2F;输出时，程序并不会直接连接到实际的数据源，没有和实际的输入&#x2F;输出节点连接。使用处理流的一个明显好处是，只要使用相同的处理流，程序就可以采用完全相同的输入&#x2F;输出代码来访问不同的数据源，随着处理流所包装节点流的变化，程序实际所访问的数据源也相应地发生变化。</p>
</li>
<li><p>实际上，Java使用处理流来包装节点流是一种典型的装饰器设计模式，通过使用处理流来包装不同的节点流，既可以消除不同节点流的实现差异，也可以提供更方便的方法来完成输入&#x2F;输出功能。</p>
<p><img src= "/medias/detail/load.gif" data-lazy-src="/p/7e6242c7/79fe8daacd5a1a32da36b36f1d622fba.png"></p>
</li>
</ul>
</li>
</ul>
<h3 id="IO流基类概述"><a href="#IO流基类概述" class="headerlink" title="IO流基类概述"></a>IO流基类概述</h3><ul>
<li>IO流基类概述<ul>
<li>a:字节流的抽象基类：<ul>
<li>InputStream ，OutputStream。</li>
</ul>
</li>
<li>b:字符流的抽象基类：<ul>
<li>Reader ， Writer。</li>
<li>注：由这四个类派生出来的子类名称都是以其父类名作为子类名的后缀。</li>
<li>如：InputStream的子类FileInputStream。</li>
<li>如：Reader的子类FileReader。</li>
</ul>
</li>
</ul>
</li>
<li>字节流和字符流：<ul>
<li>字节流：以字节为单位，每次次读入或读出是8位数据。可以读任何类型数据。</li>
<li>字符流：以字符为单位，每次次读入或读出是16位数据。其只能读取字符类型数据。</li>
</ul>
</li>
<li>输出流和输入流：<ul>
<li>输出流：从内存读出到文件。只能进行写操作。</li>
<li>输入流：从文件读入到内存。只能进行读操作。</li>
<li>注意：这里的出和入，都是相对于系统内存而言的。</li>
</ul>
</li>
<li>节点流和处理流：<ul>
<li>节点流：直接与数据源相连，读入或读出。</li>
<li>处理流：与节点流一块使用，在节点流的基础上，再套接一层，套接在节点流上的就是处理流。</li>
<li>为什么要有处理流？直接使用节点流，读写不方便，为了更快的读写文件，才有了处理流。</li>
</ul>
</li>
</ul>
<h2 id="字节和字符"><a href="#字节和字符" class="headerlink" title="字节和字符"></a>字节和字符</h2><h3 id="什么是字节"><a href="#什么是字节" class="headerlink" title="什么是字节"></a>什么是字节</h3><ul>
<li>关于字节，我们在学习8大基本数据类型中都有了解，每个字节(byte)有8bit组成，每种数据类型又几个字节组成等。</li>
</ul>
<h3 id="什么是字符"><a href="#什么是字符" class="headerlink" title="什么是字符"></a>什么是字符</h3><ul>
<li>字符流出现的原因<ul>
<li>字符流出现的原因:由于字节流操作中文不是特别方便，所以，java就提供了字符流。</li>
<li>字符流: 字符流 &#x3D; 字节流 + 编码表</li>
</ul>
</li>
<li>字符流的由来：<ul>
<li>因为数据编码的不同，而有了对字符进行高效操作的流对象。本质其实就是基于字节流读取时，去查了指定的码表。</li>
</ul>
</li>
<li>关于字符<ul>
<li>可能代表一个汉字或者英文字母。</li>
</ul>
</li>
</ul>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><ul>
<li>字节流和字符流和用法几乎完全一样，区别在于字节流和字符流所操作的数据单元不同。</li>
<li>字节流和字符流的区别：<ul>
<li>读写单位不同：字节流以字节（8bit）为单位，字符流以字符为单位，根据码表映射字符，一次可能读多个字节。</li>
<li>处理对象不同：字节流能处理所有类型的数据（如图片、avi等），而字符流只能处理字符类型的数据，比如文本内容。</li>
</ul>
</li>
</ul>
<h3 id="unicode编码"><a href="#unicode编码" class="headerlink" title="unicode编码"></a>unicode编码</h3><ul>
<li>Java采用unicode编码，2个字节来表示一个字符。<ul>
<li>Java采用unicode来表示字符，一个中文或英文字符的unicode编码都占2个字节。</li>
<li>但如果采用其他编码方式，一个字符占用的字节数则各不相同。</li>
</ul>
</li>
<li>这点与C语言中不同，C语言中采用ASCII。在大多数系统中，一个字符通常占1个字节，但是在0~127整数之间的字符映射，unicode向下兼容ASCII。</li>
<li>可能有点晕，举个例子解释下。<ul>
<li>例如：Java中的String类是按照unicode进行编码的，当使用<code>String(byte[] bytes, String encoding)</code>构造字符串时，encoding所指的是bytes中的数据是按照那种方式编码的，而不是最后产生的String是什么编码方式，换句话说，是让系统把bytes中的数据由encoding编码方式转换成unicode编码。</li>
<li>如果不指明，bytes的编码方式将由jdk根据操作系统决定。</li>
</ul>
</li>
</ul>
<h3 id="如何获取字节"><a href="#如何获取字节" class="headerlink" title="如何获取字节"></a>如何获取字节</h3><ul>
<li><p><code>getBytes(String charsetName)</code>使用指定的编码方式将此String编码为 byte 序列，并将结果存储到一个新的 byte 数组中。如果不指定将使用操作系统默认的编码方式，我的电脑默认的是GBK编码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YC</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;你好hello&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">byte_len</span> <span class="operator">=</span> str.getBytes().length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> str.length();</span><br><span class="line">        System.out.println(<span class="string">&quot;字节长度为：&quot;</span> + byte_len);</span><br><span class="line">        System.out.println(<span class="string">&quot;字符长度为：&quot;</span> + len);</span><br><span class="line">        System.out.println(<span class="string">&quot;系统默认编码方式：&quot;</span> + System.getProperty(<span class="string">&quot;file.encoding&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出结果</span><br><span class="line">字节长度为：<span class="number">9</span></span><br><span class="line">字符长度为：<span class="number">7</span></span><br><span class="line">系统默认编码方式：GBK</span><br></pre></td></tr></table></figure>
</li>
<li><p>为什么字节和字符长度不同</p>
<ul>
<li>在 GB 2312 编码或 GBK 编码中，一个英文字母字符存储需要1个字节，一个汉字字符存储需要2个字节。</li>
<li>在UTF-8编码中，一个英文字母字符存储需要1个字节，一个汉字字符储存需要3到4个字节。</li>
<li>在UTF-16编码中，一个英文字母字符存储需要2个字节，一个汉字字符储存需要3到4个字节（Unicode扩展区的一些汉字存储需要4个字节）。</li>
<li>在UTF-32编码中，世界上任何字符的存储都需要4个字节。</li>
</ul>
</li>
<li><p><strong>简单来讲，一个字符表示一个汉字或英文字母，具体字符与字节之间的大小比例视编码情况而定。有时候读取的数据是乱码，就是因为编码方式不一致，需要进行转换，然后再按照unicode进行编码。</strong></p>
</li>
</ul>
<h3 id="String中编解码问题"><a href="#String中编解码问题" class="headerlink" title="String中编解码问题"></a>String中编解码问题</h3><ul>
<li><code>String(byte[] bytes, String charsetName)</code>:通过指定的字符集解码字节数组</li>
<li><code>byte[] getBytes(String charsetName)</code>:使用指定的字符集合把字符串编码为字节数组</li>
<li>编码:把看得懂的变成看不懂的: <code>String -- byte[]</code></li>
<li>解码:把看不懂的变成看得懂的: <code>byte[] -- String</code></li>
</ul>
<h2 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h2><ul>
<li>只要是处理纯文本数据，就优先考虑使用字符流。除此之外都使用字节流。</li>
<li>流使用完毕后必须调用<code>close()</code>方法关闭流对象</li>
</ul>
<h3 id="InputStream"><a href="#InputStream" class="headerlink" title="InputStream"></a>InputStream</h3><ul>
<li><p>InputStream 是所有的输入字节流的父类，它是一个抽象类，主要包含三个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取一个字节并以整数的形式返回(0~255),如果返回-1已到输入流的末尾。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read</span><span class="params">()</span> ；</span><br><span class="line"><span class="comment">//读取一系列字节并存储到一个数组buffer，返回实际读取的字节数，如果读取前已到输入流的末尾返回-1。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">byte</span>[] buffer)</span> ；</span><br><span class="line"><span class="comment">//读取length个字节并存储到一个字节数组buffer，从off位置开始存,最多len， 返回实际读取的字节数，如果读取前以到输入流的末尾返回-1。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">byte</span>[] buffer, <span class="type">int</span> off, <span class="type">int</span> len)</span> ；</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="OutputStream"><a href="#OutputStream" class="headerlink" title="OutputStream"></a>OutputStream</h3><ul>
<li><p>OutputStream 是所有的输出字节流的父类，它是一个抽象类，主要包含如下四个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向输出流中写入一个字节数据,该字节数据为参数b的低8位。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> b)</span> ;</span><br><span class="line"><span class="comment">//将一个字节类型的数组中的数据写入输出流。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">byte</span>[] b)</span>;</span><br><span class="line"><span class="comment">//将一个字节类型的数组中的从指定位置（off）开始的,len个字节写入到输出流。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">byte</span>[] b, <span class="type">int</span> off, <span class="type">int</span> len)</span>;</span><br><span class="line"><span class="comment">//将输出流中缓冲的数据全部写出到目的地。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">flush</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="FileInputStream"><a href="#FileInputStream" class="headerlink" title="FileInputStream"></a>FileInputStream</h2><ul>
<li><p>构造方法</p>
<ul>
<li><code>FileOutputStream(File file)</code></li>
<li><code>FileOutputStream(String name)</code></li>
</ul>
</li>
<li><p>FileInputStream读取数据一次一个字节</p>
<ul>
<li>int read():一次读取一个字节</li>
<li>read(数组)</li>
<li>read(数组，数组起始位置，存的个数)</li>
<li><strong>available():返回与之关联的文件的字节数</strong></li>
</ul>
<blockquote>
<p><strong>起始位置 + 存的个数之和</strong> 要小于数组的长度，否者出现数组下标越界的异常</p>
</blockquote>
</li>
<li><p>示例代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\fulsun\\day16\\a.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">        file.createNewFile();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 创建流对象</span></span><br><span class="line">    <span class="comment">// 读取文件Inputstream,可能出现“文件找不到异常”</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">    <span class="comment">// 调用系统资源,创建了一个a.txt文件</span></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 读/写</span></span><br><span class="line">    <span class="comment">// 写</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;Hello.&quot;</span>;</span><br><span class="line">     <span class="comment">// 把字符串转换成字节数组</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = str.getBytes();</span><br><span class="line">    <span class="comment">// 调用方法写数据</span></span><br><span class="line">    fos.write(bytes);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读</span></span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">while</span> ((i = fis.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">        System.out.print((<span class="type">char</span>) i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 关闭流对象 作用: 通知系统释放关于该文件的资源</span></span><br><span class="line">    fos.close();</span><br><span class="line">    fis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="FileOutputStream"><a href="#FileOutputStream" class="headerlink" title="FileOutputStream"></a>FileOutputStream</h2><h3 id="write-方法"><a href="#write-方法" class="headerlink" title="write()方法"></a>write()方法</h3><ul>
<li><p>public void write(int b):写一个字节</p>
</li>
<li><p>public void write(byte[] b):写一个字节数组</p>
</li>
<li><p>public void write(byte[] b,int off,int len):写一个字节数组的一部分</p>
<blockquote>
<p><strong>起始位置 + 存的个数之和</strong> 要小于数组的长度，否者出现数组下标越界的异常</p>
</blockquote>
</li>
<li><p>FileOutputStream写出数据实现换行和追加写入</p>
<ul>
<li><code>FileOutputStream fos = new FileOutputStream(destFile,false);</code>&#x2F;&#x2F;默认覆盖</li>
<li><code>FileOutputStream fos2 = new FileOutputStream(destFile,true);</code>&#x2F;&#x2F;追加</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// public FileOutputStream(String name,  boolean append)</span></span><br><span class="line">    <span class="comment">// 表示追加写入</span></span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;c.txt&quot;</span> , <span class="literal">true</span>) ;</span><br><span class="line">    <span class="comment">// 写数据</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">        <span class="type">byte</span>[] bytes = (<span class="string">&quot;呵呵&quot;</span> + x + <span class="string">&quot;\r\n&quot;</span>).getBytes() ;</span><br><span class="line">        fos.write(bytes) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    fos.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="字节流复制操作"><a href="#字节流复制操作" class="headerlink" title="字节流复制操作"></a>字节流复制操作</h2><h3 id="字节流复制文本文件"><a href="#字节流复制文本文件" class="headerlink" title="字节流复制文本文件"></a>字节流复制文本文件</h3><ul>
<li><p>一次读取一个字节</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 复制文本文件:</span></span><br><span class="line"><span class="comment">     *         读和写</span></span><br><span class="line"><span class="comment">     *     分析:</span></span><br><span class="line"><span class="comment">     *         1: 创建两个对象一个是字节输入流对象,一个是字节输出流对象</span></span><br><span class="line"><span class="comment">     *         2: 一次读取一个字节,一次写一个字节</span></span><br><span class="line"><span class="comment">     *         3: 释放资源</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 创建两个对象一个是字节输入流对象,一个是字节输出流对象</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;FileOutputStreamDemo.java&quot;</span>) ;</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;copyFile.java&quot;</span>) ;</span><br><span class="line">    <span class="comment">// 一次读取一个字节,一次写一个字节</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">by</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((by = fis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">        fos.write(by) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    fos.close() ;</span><br><span class="line">    fis.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>一次读取一个字节数组复制文件</p>
</li>
<li><pre><code class="java">//创建了一个和文件大小一样的缓冲区，刚刚好
// byte[] buf = new byte[fis.available()];
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```java</span><br><span class="line">public static void main(String[] args) throws IOException &#123;</span><br><span class="line">    /**</span><br><span class="line">     * 需求: 使用字节流复制文本文件,采用字节输入流的第二种读取数据的方式</span><br><span class="line">     */</span><br><span class="line">    // 创建字节输入流对象和字节输出流对象</span><br><span class="line">    FileInputStream fis = new FileInputStream(&quot;FileOutputStreamDemo.java&quot;) ;</span><br><span class="line">    FileOutputStream fos = new FileOutputStream(&quot;copyFile2.java&quot;) ;</span><br><span class="line">    // 一次读取一个字节数组复制文件</span><br><span class="line">    byte[] bytes = new byte[1024] ;</span><br><span class="line">    int len = 0 ;        // 作用: 记录读取到的有效的字节个数</span><br><span class="line">    while((len = fis.read(bytes)) != -1)&#123;</span><br><span class="line">        fos.write(bytes, 0, len) ;</span><br><span class="line">    &#125;</span><br><span class="line">    // 释放资源</span><br><span class="line">    fos.close() ;</span><br><span class="line">    fis.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<h3 id="字节流复制MP3"><a href="#字节流复制MP3" class="headerlink" title="字节流复制MP3"></a>字节流复制MP3</h3><ul>
<li><p>一次读取一个字节</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 需求: 使用字节流复制mp3文件</span></span><br><span class="line">    <span class="comment">// 创建字节输入流和字节输出流对象</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\a.mp3&quot;</span>) ;</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;D:\\a.mp3&quot;</span>) ;</span><br><span class="line">    <span class="comment">// 复制文件</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">by</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((by = fis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">        fos.write(by) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    fos.close() ;</span><br><span class="line">    fis.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>一次读取一个字节数组</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 需求: 使用字节流复制mp3文件一次读取一个字节数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 创建对象</span></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\a.mp3&quot;</span>) ;</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;D:\\a.mp3&quot;</span>) ;</span><br><span class="line">    <span class="comment">// 一次读取一个字节数组复制文件</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>] ;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((len = fis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        fos.write(bytes, <span class="number">0</span>, len) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    fos.close() ;</span><br><span class="line">    fis.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="复制MP3效率"><a href="#复制MP3效率" class="headerlink" title="复制MP3效率"></a>复制MP3效率</h3><ul>
<li><p>基本流一次读取一个<strong>字节</strong>复制文件 时间是:88670毫秒</p>
</li>
<li><p>基本流一次读取一个<strong>字节数组</strong>复制文件 时间是:130毫秒</p>
</li>
<li><p>高效流一次读取一个<strong>字节</strong>复制文件 时间是:990毫秒</p>
</li>
<li><p>高效流一次读取一个<strong>字节数组</strong>赋值文件 时间是:50毫秒</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile_4</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 创建高效流对象</span></span><br><span class="line">    <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\a.avi&quot;</span>)) ;</span><br><span class="line">    <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;D:\\a.avi&quot;</span>)) ;</span><br><span class="line">    <span class="comment">// 一次读取一个字节</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">by</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((by = bis.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">        bos.write(by) ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 一次读取一个字节数组</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>] ;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        bos.write(bytes, <span class="number">0</span>, len) ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    bos.close() ;</span><br><span class="line">    bis.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ObjectInputStream"><a href="#ObjectInputStream" class="headerlink" title="ObjectInputStream"></a>ObjectInputStream</h2><ul>
<li>对象输入流是用来恢复之前序列化存储的对象，对象输入流可以确保每次从流中读取的对象能匹配Java虚拟机中已经存在的类，根据需求使用标准机制加载类。</li>
<li>另外只有支持Serializable或者Externalizable接口的类可以从流中读取出来。对象输入流继承了InputStream中字节读取方法</li>
</ul>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>boolean readBoolean()</td>
<td>读出布尔类型数据</td>
</tr>
<tr>
<td>byte readByte()</td>
<td>读取一个8比特字节</td>
</tr>
<tr>
<td>char readChar()</td>
<td>读取一个16比特的字符</td>
</tr>
<tr>
<td>double readDouble()</td>
<td>读取一个64比特的double类型数据</td>
</tr>
<tr>
<td>float readFloat()</td>
<td>读取一个32比特的float类型数据</td>
</tr>
<tr>
<td>void readFully(byte[] buf)</td>
<td>将流中所有的字节读取到buf字节数组中</td>
</tr>
<tr>
<td>void readFully(byte[] buf, int off, int len)</td>
<td>从流中读取len个字节数据到buf中，第一个字节存放在buf[off],第二个字节存放在buf[off+1],以此类推</td>
</tr>
<tr>
<td>int readInt()</td>
<td>读取一个32比特的int类型数据</td>
</tr>
<tr>
<td>long readLong()</td>
<td>读取一个64比特的long类型数据</td>
</tr>
<tr>
<td>Object readObject()</td>
<td>从流中读取一个对象数据，包括对象所属的类，该类的签名，类中非瞬态和非静态的字段值以及所有非超类型的字段值</td>
</tr>
<tr>
<td>short readShort()</td>
<td>读取一个16比特的short类型数据</td>
</tr>
<tr>
<td>int readUnsignedByte()</td>
<td>读取一个非负的8比特字节，转换为int类型返回</td>
</tr>
<tr>
<td>int readUnsignedShort()</td>
<td>读取非负的16比特的short类型数据，转换为int类型返回</td>
</tr>
<tr>
<td>String readUTF()</td>
<td>读取一个按UTF-8编码的String类型的数据</td>
</tr>
</tbody></table>
<h3 id="反序列化对象"><a href="#反序列化对象" class="headerlink" title="反序列化对象"></a>反序列化对象</h3><ul>
<li><p>Person类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> year;</span><br><span class="line">    <span class="keyword">public</span> Date birth;</span><br><span class="line">  <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>序列化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.ObjectInputStream;</span><br><span class="line"></span><br><span class="line">import model.Person;</span><br><span class="line"></span><br><span class="line">public class ObjectTest &#123;</span><br><span class="line">    public static void main(String[] args) throws IOException, ClassNotFoundException&#123;</span><br><span class="line">        FileInputStream fis = new FileInputStream(&quot;G:\\person.obj&quot;);      //构造文件输入流</span><br><span class="line">        ObjectInputStream ois = new ObjectInputStream(fis);               //用文件输出流初始化对象输入流</span><br><span class="line"></span><br><span class="line">        Person p1 = (Person)ois.readObject();                             //依次读出对象</span><br><span class="line">        Person p2 = (Person)ois.readObject();</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;p1的内容为:&quot;+p1.toString());</span><br><span class="line">        System.out.println(&quot;p2的内容为:&quot;+p2.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ObjectOutputStream"><a href="#ObjectOutputStream" class="headerlink" title="ObjectOutputStream"></a>ObjectOutputStream</h2><ul>
<li><p>对象输出流用来持久化对象的，可以将对象数据写入到文件，</p>
</li>
<li><p>如果流是网络流，则可以将对象传输给其他用户进行通信。</p>
</li>
<li><p>只有支持Serializable接口的对象支持写入到流，每个序列化对象被编码，包括类的名称和类的签名，以及类的对象中的字段值，以及arrays变量，以及从初始化对象引用的任何其他对象的闭包。</p>
</li>
<li><p>对象输出流继承了OutputStream中字节写的方法</p>
</li>
</ul>
<h3 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h3><table>
<thead>
<tr>
<th>方法名</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>void writeBoolean(boolean val)</td>
<td>写一个布尔类型数据</td>
</tr>
<tr>
<td>void writeByte(int val)</td>
<td>写一个8比特字节数据，int类型只截取第8位</td>
</tr>
<tr>
<td>void writeBytes(String str)</td>
<td>将一个字符串数据当作一个字节序列写入流中</td>
</tr>
<tr>
<td>void writeChar(int val)</td>
<td>写入一个16比特的字符数据，参数为int，只截取低16位</td>
</tr>
<tr>
<td>void writeChars(String str)</td>
<td>将一个字符串数据当作一个字符序列写入</td>
</tr>
<tr>
<td>void writeDouble(double val)</td>
<td>写入一个64比特的double类型数据</td>
</tr>
<tr>
<td>void writeFloat(float val)</td>
<td>写入一个32比特的float类型数据</td>
</tr>
<tr>
<td>void writeLong(long val)</td>
<td>写入一个64比特的long类型数据</td>
</tr>
<tr>
<td>void writeObject(Object obj)</td>
<td>将一个对象写入到流中，包括类的名称和类的签名，以及类的对象中的字段值，以及arrays变量，以及从初始化对象引用的任何其他对象的闭包。</td>
</tr>
<tr>
<td>void writeShort(int val)</td>
<td>将一个16比特的short类型数据写入到流中</td>
</tr>
<tr>
<td>void writeUTF(String str)</td>
<td>将一个按UTF-8编码的字符串数据写入到流中</td>
</tr>
</tbody></table>
<h3 id="序列化对象"><a href="#序列化对象" class="headerlink" title="序列化对象"></a>序列化对象</h3><ul>
<li><p>代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> model.Person;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;G:\\person.obj&quot;</span>);       <span class="comment">//定一个文件输出流，用来写文件</span></span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(fos);                <span class="comment">//用文件输出流构造对象输出流</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();                                            <span class="comment">//定义两个对象</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">        p1.setName(<span class="string">&quot;福国&quot;</span>);</span><br><span class="line">        p1.setYear(<span class="number">23</span>);</span><br><span class="line">        p1.setBirth(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">95</span>,<span class="number">6</span>,<span class="number">12</span>));</span><br><span class="line"></span><br><span class="line">        p2.setName(<span class="string">&quot;zhangbin&quot;</span>);</span><br><span class="line">        p2.setYear(<span class="number">24</span>);</span><br><span class="line">        p2.setBirth(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">94</span>,<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">        oos.writeObject(p1);                                                 <span class="comment">//将两个对象写入文件</span></span><br><span class="line">        oos.writeObject(p2);</span><br><span class="line"></span><br><span class="line">        oos.close();</span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h2><ul>
<li><strong>在执行完流操作后，要调用</strong><code>close()</code><strong>方法来关系输入流，因为程序里打开的IO资源不属于内存资源，垃圾回收机制无法回收该资源，所以应该显式关闭文件IO资源。</strong></li>
</ul>
<h3 id="Reader"><a href="#Reader" class="headerlink" title="Reader"></a>Reader</h3><ul>
<li><p>Reader 是所有的输入字符流的父类，它是一个抽象类，主要包含三个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取一个字符并以整数的形式返回(0~255),如果返回-1已到输入流的末尾。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read</span><span class="params">()</span> ；</span><br><span class="line"><span class="comment">//读取一系列字符并存储到一个数组buffer，返回实际读取的字符数，如果读取前已到输入流的末尾返回-1。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">char</span>[] cbuf)</span> ；</span><br><span class="line"><span class="comment">//读取length个字符,并存储到一个数组buffer，从off位置开始存,最多读取len，返回实际读取的字符数，如果读取前以到输入流的末尾返回-1。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">char</span>[] cbuf, <span class="type">int</span> off, <span class="type">int</span> len)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对比InputStream和Reader所提供的方法，就不难发现两个基类的功能基本一样的，只不过读取的数据单元不同。</p>
</li>
<li><p>除此之外，InputStream和Reader还支持如下方法来移动流中的指针位置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在此输入流中标记当前的位置</span></span><br><span class="line"><span class="comment">//readlimit - 在标记位置失效前可以读取字节的最大限制。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">mark</span><span class="params">(<span class="type">int</span> readlimit)</span></span><br><span class="line"><span class="comment">// 测试此输入流是否支持 mark 方法</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">markSupported</span><span class="params">()</span></span><br><span class="line"><span class="comment">// 跳过和丢弃此输入流中数据的 n 个字节/字符</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">skip</span><span class="params">(<span class="type">long</span> n)</span></span><br><span class="line"><span class="comment">//将此流重新定位到最后一次对此输入流调用 mark 方法时的位置</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">reset</span><span class="params">()</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Writer"><a href="#Writer" class="headerlink" title="Writer"></a>Writer</h3><ul>
<li><p>Writer 是所有的输出字符流的父类，它是一个抽象类,主要包含如下六个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向输出流中写入一个字符数据,该字节数据为参数b的低16位。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> c)</span>;</span><br><span class="line"><span class="comment">//将一个字符类型的数组中的数据写入输出流，</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">char</span>[] cbuf)</span></span><br><span class="line"><span class="comment">//将一个字符类型的数组中的从指定位置（offset）开始的,length个字符写入到输出流。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">char</span>[] cbuf, <span class="type">int</span> offset, <span class="type">int</span> length)</span>;</span><br><span class="line"><span class="comment">//将一个字符串中的字符写入到输出流。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String string)</span>;</span><br><span class="line"><span class="comment">//将一个字符串从offset开始的length个字符写入到输出流。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String string, <span class="type">int</span> offset, <span class="type">int</span> length)</span>;</span><br><span class="line"><span class="comment">//将输出流中缓冲的数据全部写出到目的地。</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">flush</span><span class="params">()</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以看出，Writer比OutputStream多出两个方法，主要是支持写入字符和字符串类型的数据。</p>
</li>
</ul>
<h2 id="InputStreamReader"><a href="#InputStreamReader" class="headerlink" title="InputStreamReader"></a>InputStreamReader</h2><ul>
<li>转换流InputStreamReader的使用</li>
</ul>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><ul>
<li><p><code>public InputStreamReader(InputStream in)</code>: 使用的默认的编码表</p>
</li>
<li><p><code>public InputStreamReader(InputStream in , String charsetName)</code>使用指定的编码表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputStreamReaderDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 使用指定的编码表</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;a.txt&quot;</span>) , <span class="string">&quot;utf-8&quot;</span>) ;</span><br><span class="line">        <span class="comment">// 读取数据</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">ch</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">while</span>((ch = isr.read()) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.print((<span class="type">char</span>)ch);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        isr.close() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>读取数据</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public int <span class="built_in">read</span>()</span><br><span class="line">public int <span class="built_in">read</span>(char[] cbuf)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="OutputStreamWriter"><a href="#OutputStreamWriter" class="headerlink" title="OutputStreamWriter"></a>OutputStreamWriter</h2><ul>
<li>转换流OutputStreamWriter的使用</li>
</ul>
<h3 id="构造方式"><a href="#构造方式" class="headerlink" title="构造方式"></a>构造方式</h3><ul>
<li><code>public InputStreamReader(InputStream in)</code></li>
<li><code>public InputStreamReader(InputStream in , String charsetName)</code> 使用指定的编码表</li>
</ul>
<h3 id="写数据方法"><a href="#写数据方法" class="headerlink" title="写数据方法"></a>写数据方法</h3><ul>
<li><p>字符流的5种写数据的方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> c)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">char</span>[] cbuf)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">char</span>[] cbuf,<span class="type">int</span> off,<span class="type">int</span> len)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String str)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String str,<span class="type">int</span> off,<span class="type">int</span> len)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>示例代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OutputStreamWriterDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 创建: OutputStreamWriter</span></span><br><span class="line">        <span class="comment">// 创建: OutputStream的对象</span></span><br><span class="line">        <span class="comment">//		FileOutputStream fos = new FileOutputStream(&quot;a.txt&quot;) ;</span></span><br><span class="line">        <span class="comment">//		OutputStreamWriter osw = new OutputStreamWriter(fos) ;</span></span><br><span class="line">        <span class="comment">//		OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(&quot;a.txt&quot;)) ;</span></span><br><span class="line">        <span class="comment">// public InputStreamReader(InputStream in , String charsetName)	使用指定的编码表</span></span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;a.txt&quot;</span>) , <span class="string">&quot;UTF-8&quot;</span>) ;</span><br><span class="line">        <span class="comment">// 调用方法</span></span><br><span class="line">        osw.write(<span class="string">&quot;中国&quot;</span>) ;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        osw.close() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="字符流复制"><a href="#字符流复制" class="headerlink" title="字符流复制"></a>字符流复制</h2><h3 id="复制单级文件夹"><a href="#复制单级文件夹" class="headerlink" title="复制单级文件夹"></a>复制单级文件夹</h3><ul>
<li><p>复制单级文件夹，代码如下所示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 需求: 把C:\\course这个文件夹复制到D:\\course盘下</span></span><br><span class="line"><span class="comment">	 * 分析:</span></span><br><span class="line"><span class="comment">	 * 		1: 把C:\\course这个目录封装成一个File对象</span></span><br><span class="line"><span class="comment">	 * 		2: 把D:\\course这个目录封装成一个File对象</span></span><br><span class="line"><span class="comment">	 * 		3: 判断D:\\course是否存在,如果存在就创建一个文件夹</span></span><br><span class="line"><span class="comment">	 * 		4: 获取C:\\course这个目录下所有的文件对应的File数组</span></span><br><span class="line"><span class="comment">	 * 		5: 遍历数组,获取元素进行复制</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="comment">// 把C:\\course这个目录封装成一个File对象</span></span><br><span class="line">	<span class="type">File</span> <span class="variable">srcFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\course&quot;</span>) ;</span><br><span class="line">	<span class="comment">// 把D:\\course这个目录封装成一个File对象</span></span><br><span class="line">	<span class="type">File</span> <span class="variable">destFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\course&quot;</span>) ;</span><br><span class="line">	<span class="comment">// 判断D:\\course是否存在,如果存在就创建一个文件夹</span></span><br><span class="line">	<span class="keyword">if</span>(!destFolder.exists())&#123;</span><br><span class="line">		destFolder.mkdir() ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 复制文件夹</span></span><br><span class="line">	IOUtils.copyFolder(srcFolder, destFolder, <span class="literal">null</span>) ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IOUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFolder</span><span class="params">(File srcFolder , File destFolder , FilenameFilter filenameFilter)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		File[] files = <span class="literal">null</span> ;</span><br><span class="line">		<span class="keyword">if</span>(filenameFilter == <span class="literal">null</span>) &#123;</span><br><span class="line">			files = srcFolder.listFiles() ;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			files = srcFolder.listFiles(filenameFilter) ;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 遍历</span></span><br><span class="line">		<span class="keyword">for</span>(File f : files) &#123;</span><br><span class="line">			<span class="comment">// 创建目标文件</span></span><br><span class="line">			<span class="type">String</span> <span class="variable">destFileName</span> <span class="operator">=</span> f.getName() ;</span><br><span class="line">			<span class="type">File</span> <span class="variable">destFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destFolder , destFileName) ;</span><br><span class="line">			<span class="comment">// 复制文件</span></span><br><span class="line">			copyFile(f , destFile) ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File srcFile , File destFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">// 创建流对象</span></span><br><span class="line">		<span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile)) ;</span><br><span class="line">		<span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile)) ;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 一次读取一个字节数组复制文件</span></span><br><span class="line">		<span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>] ;</span><br><span class="line">		<span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">		<span class="keyword">while</span>((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">			bos.write(bytes, <span class="number">0</span>, len) ;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 释放资源</span></span><br><span class="line">		bos.close() ;</span><br><span class="line">		bis.close() ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="复制指定目录下指定后缀名的文件并修改名称"><a href="#复制指定目录下指定后缀名的文件并修改名称" class="headerlink" title="复制指定目录下指定后缀名的文件并修改名称"></a>复制指定目录下指定后缀名的文件并修改名称</h3><ul>
<li><p>复制指定目录下指定后缀名的文件并修改名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 把C:\\demo这个目录下所有的以.java结尾的文件复制到D:\\demo中,然后将这个文件的后缀名更改为.jad</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="comment">// 把C:\\demo这个目录下所有的以.java结尾的文件复制到D:\\demo中</span></span><br><span class="line">	<span class="comment">// 1: 把C:\\demo这个目录封装成一个File对象</span></span><br><span class="line">	<span class="type">File</span> <span class="variable">srcFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\demo&quot;</span>) ;</span><br><span class="line">	<span class="comment">// 2: 把D:\\demo这么目录封装成一个File对象</span></span><br><span class="line">	<span class="type">File</span> <span class="variable">destFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\demo&quot;</span>) ;</span><br><span class="line">	<span class="comment">// 3: 判断D:\\demo这个路径是否存在</span></span><br><span class="line">	<span class="keyword">if</span>(!destFolder.exists()) &#123;</span><br><span class="line">		destFolder.mkdir() ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 调用方法</span></span><br><span class="line">	IOUtils.copyFolder(srcFolder, destFolder, <span class="keyword">new</span> <span class="title class_">FilenameFilter</span>() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">accept</span><span class="params">(File dir, String name)</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">File</span>(dir , name).isFile() &amp;&amp; name.endsWith(<span class="string">&quot;.java&quot;</span>) ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;) ;</span><br><span class="line">	System.out.println(<span class="string">&quot;-----------------------------------------------------&quot;</span>);</span><br><span class="line">	<span class="comment">// 获取destFolder下所有的文件对应的File数组</span></span><br><span class="line">	File[] files = destFolder.listFiles() ;</span><br><span class="line">	<span class="keyword">for</span>(File f : files) &#123;</span><br><span class="line">		<span class="comment">// 创建目标文件名称</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">destFileName</span> <span class="operator">=</span> f.getName().replace(<span class="string">&quot;.java&quot;</span>, <span class="string">&quot;.jad&quot;</span>) ;</span><br><span class="line">		<span class="comment">// 创建目标文件</span></span><br><span class="line">		<span class="type">File</span> <span class="variable">destFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destFolder , destFileName) ;</span><br><span class="line">		<span class="comment">// 调用</span></span><br><span class="line">		f.renameTo(destFile) ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IOUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFolder</span><span class="params">(String srcPahtName , String destPathName , FilenameFilter filenameFilter)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="type">File</span> <span class="variable">srcFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(srcPahtName) ;</span><br><span class="line">		<span class="type">File</span> <span class="variable">destFolder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destPathName) ;</span><br><span class="line">		<span class="keyword">if</span>(!destFolder.exists()) &#123;</span><br><span class="line">			destFolder.mkdir() ;</span><br><span class="line">		&#125;</span><br><span class="line">		copyFolder(srcFolder , destFolder , filenameFilter) ;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFolder</span><span class="params">(File srcFolder , File destFolder , FilenameFilter filenameFilter)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		File[] files = <span class="literal">null</span> ;</span><br><span class="line">		<span class="keyword">if</span>(filenameFilter == <span class="literal">null</span>) &#123;</span><br><span class="line">			files = srcFolder.listFiles() ;</span><br><span class="line">		&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">			files = srcFolder.listFiles(filenameFilter) ;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 遍历</span></span><br><span class="line">		<span class="keyword">for</span>(File f : files) &#123;</span><br><span class="line">			<span class="comment">// 创建目标文件</span></span><br><span class="line">			<span class="type">String</span> <span class="variable">destFileName</span> <span class="operator">=</span> f.getName() ;</span><br><span class="line">			<span class="type">File</span> <span class="variable">destFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destFolder , destFileName) ;</span><br><span class="line">			<span class="comment">// 复制文件</span></span><br><span class="line">			copyFile(f , destFile) ;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File srcFile , File destFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">		<span class="comment">// 创建流对象</span></span><br><span class="line">		<span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile)) ;</span><br><span class="line">		<span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile)) ;</span><br><span class="line">		<span class="comment">// 一次读取一个字节数组复制文件</span></span><br><span class="line">		<span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>] ;</span><br><span class="line">		<span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">		<span class="keyword">while</span>((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">			bos.write(bytes, <span class="number">0</span>, len) ;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 释放资源</span></span><br><span class="line">		bos.close() ;</span><br><span class="line">		bis.close() ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="中文乱码解决"><a href="#中文乱码解决" class="headerlink" title="中文乱码解决"></a>中文乱码解决</h2><ol>
<li><p>字节流读取到数组,再显示read(byte[]): 将流中的数据读取到byte数组中，返回长度，在内存中读到数组中，效率高</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拿一个袋子（byte[]）</span></span><br><span class="line"><span class="comment">// 文件的长度作为数组的长度</span></span><br><span class="line"><span class="comment">// byte[] cbuf = new byte[(int) file.length()];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 流读取的长度作为数组的长度</span></span><br><span class="line"><span class="type">byte</span>[] cbuf = <span class="keyword">new</span> <span class="title class_">byte</span>[fis.available()];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将流中的数据读取到字节数组中</span></span><br><span class="line">System.out.println(fis.read(cbuf));</span><br><span class="line"></span><br><span class="line"><span class="comment">// read(字节数组,字节数组的起始位置,存几个)</span></span><br><span class="line">fis.read(cbuf,<span class="number">4</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从袋子里拿出来(转为字符)</span></span><br><span class="line"><span class="comment">// System.out.println(new String(cbuf,&quot;UTF-8&quot;));</span></span><br><span class="line">System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(cbuf,<span class="string">&quot;GBK&quot;</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符流InputStreamReader读取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建读/写的字节流对象</span></span><br><span class="line"><span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"><span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line"><span class="comment">// 包装流:字节---&gt;字符流</span></span><br><span class="line"><span class="type">InputStreamReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(fis);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符流读取</span></span><br><span class="line"><span class="type">int</span> temp;</span><br><span class="line"><span class="keyword">while</span> ((temp = reader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">    System.out.println((<span class="type">char</span>) temp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Buffer缓冲流"><a href="#Buffer缓冲流" class="headerlink" title="Buffer缓冲流"></a>Buffer缓冲流</h2><ul>
<li><p>Java缓冲流本身并不具有IO流的读取与写入功能，只是在别的流(节点流或其他处理流)上加上缓冲功能提高效率，就像是把别的流包装起来一样，因此**缓冲流是一种处理流(包装流)**。</p>
</li>
<li><p><strong>当对文件或者其他数据源进行频繁的读写操作时，效率比较低，这时如果使用缓冲流就能够更高效的读写信息。因为缓冲流是先将数据缓存起来，然后当缓存区存满后或者手动刷新时再一次性的读取到程序或写入目的地。</strong></p>
<p>因此，缓冲流还是很重要的，我们在IO操作时记得加上<strong>缓冲流来提升性能</strong>。</p>
<p><img src= "/medias/detail/load.gif" data-lazy-src="/p/7e6242c7/bef4d628ef99b287210cecfc29785696.jpg"></p>
<ul>
<li>特点：<ol>
<li>读文件和写文件都使用了缓冲区，减少了读写次数，从而提高了效率</li>
<li>当创建这两个缓冲流的对象时，会创建内部缓冲数组，缺省使用32字节大小的缓冲区</li>
<li>当读取数据时，数据按块读入缓冲区，其后的读操作则直接访问缓冲区</li>
<li>当写入数据时，首先写入缓冲区，当缓冲区满时，其中的数据写入所连接的输出流。使用方法flush()可以强制将缓冲区的内容全部写入输出流。</li>
<li><strong>关闭流的顺序和打开流的顺序相反</strong>。只要关闭高层流即可，关闭高层流其实关闭了底层节点流。</li>
<li>Flush的使用：手动将buffer中内容写入文件。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="缓冲流的特殊功能"><a href="#缓冲流的特殊功能" class="headerlink" title="缓冲流的特殊功能"></a>缓冲流的特殊功能</h2><h2 id="BufferedInputStream"><a href="#BufferedInputStream" class="headerlink" title="BufferedInputStream"></a>BufferedInputStream</h2><ul>
<li><p>构造方法： <code>public BufferedInputStream(InputStream in)</code></p>
</li>
<li><p>读取数据代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;e.txt&quot;</span>)) ;</span><br><span class="line">    <span class="comment">// 一次读取一个字节</span></span><br><span class="line">    <span class="comment">//int by = 0 ;</span></span><br><span class="line">    <span class="comment">//while((by = bis.read()) != -1)&#123;</span></span><br><span class="line">    <span class="comment">//    System.out.print((char)by);</span></span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">    <span class="comment">// 一次读取一个字节数组</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>] ;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((len = bis.read(bytes)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        System.out.print(<span class="keyword">new</span> <span class="title class_">String</span>(bytes , <span class="number">0</span> , len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    bis.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="BufferedOutputStream"><a href="#BufferedOutputStream" class="headerlink" title="BufferedOutputStream"></a>BufferedOutputStream</h2><ul>
<li><p>构造方法:<code>public BufferedOutputStream(OutputStream out)</code></p>
</li>
<li><p>写出数据代码如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 创建FileOutputStream对象</span></span><br><span class="line">    <span class="comment">//FileOutputStream fos = new FileOutputStream(&quot;buf.txt&quot;) ;</span></span><br><span class="line">    <span class="comment">//BufferedOutputStream bof = new BufferedOutputStream(fos) ;</span></span><br><span class="line">    <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;buf.txt&quot;</span>)) ;</span><br><span class="line">    <span class="comment">// 调用方法</span></span><br><span class="line">    bos.write(<span class="string">&quot;哈哈,我来了&quot;</span>.getBytes()) ;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    bos.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="BufferedReader字符缓冲流"><a href="#BufferedReader字符缓冲流" class="headerlink" title="BufferedReader字符缓冲流"></a>BufferedReader字符缓冲流</h2><ul>
<li><p>构造方法：<code>public BufferedReader(Reader in)</code></p>
</li>
<li><p>特殊功能</p>
<ul>
<li><code>public void newLine()</code> 根据系统来决定换行符</li>
</ul>
</li>
<li><p>代码如下所示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用高效的字符输入流进行读取数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">    <span class="comment">// 创建高效的字符输入流对象</span></span><br><span class="line">    <span class="comment">// BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(&quot;c.txt&quot;))) ;</span></span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;c.txt&quot;</span>)) ;</span><br><span class="line">    <span class="comment">// 读取数据</span></span><br><span class="line">    <span class="comment">//		int ch = 0 ;</span></span><br><span class="line">    <span class="comment">//		while((ch = br.read()) != -1)&#123;</span></span><br><span class="line">    <span class="comment">//			System.out.print((char)ch);</span></span><br><span class="line">    <span class="comment">//		&#125;</span></span><br><span class="line">    <span class="type">char</span>[] chs = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>] ;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    <span class="keyword">while</span>((len = br.read(chs)) != -<span class="number">1</span>)&#123;</span><br><span class="line">        System.out.print(<span class="keyword">new</span> <span class="title class_">String</span>(chs , <span class="number">0</span> , len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    br.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="BufferedWriter字符缓冲流"><a href="#BufferedWriter字符缓冲流" class="headerlink" title="BufferedWriter字符缓冲流"></a>BufferedWriter字符缓冲流</h2><ul>
<li><p>构造方法：<code>public BufferedWriter(Writer out)</code></p>
</li>
<li><p>特殊功能</p>
<ul>
<li><code>public void readLine()</code> 一次读取一行数据</li>
<li>包含该行内容的字符串，不包含任何行终止符，如果已到达流末尾，则返回 null</li>
</ul>
</li>
<li><p>代码如下所示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用高效的字符输出流进行写数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 创建BufferedWriter对象</span></span><br><span class="line">    <span class="comment">// BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(&quot;c.txt&quot;))) ;</span></span><br><span class="line">    <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;c.txt&quot;</span>)) ;</span><br><span class="line">    <span class="comment">// 写数据</span></span><br><span class="line">    bw.write(<span class="string">&quot;你好&quot;</span>) ;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    bw.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="高效字符流复制"><a href="#高效字符流复制" class="headerlink" title="高效字符流复制"></a>高效字符流复制</h2><ul>
<li><p>一次读取一个字符数组复制文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CopyFileDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 创建高效的字符输入流对象</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;OutputStreamWriterDemo.java&quot;</span>)) ;</span><br><span class="line">        <span class="comment">// 创建高效的字符输出流对象</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;copyFile3.java&quot;</span>)) ;</span><br><span class="line">        <span class="comment">// 一次读取一个字符数组复制文件</span></span><br><span class="line">        <span class="type">char</span>[] chs = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">1024</span>] ;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = br.read(chs)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            bw.write(chs, <span class="number">0</span>, len) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        bw.close() ;</span><br><span class="line">        br.close() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>一次读取一行复制文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CopyFileDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 需求: 使用高效的字符流中特有的功能复制文本文件</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">        <span class="comment">// 创建高效的字符输入流对象</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;OutputStreamWriterDemo.java&quot;</span>)) ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 高效的字符输出流对象</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;copyFile4.java&quot;</span>)) ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 复制文件</span></span><br><span class="line">        <span class="comment">// 一次读取一行复制文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">        <span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            bw.write(line) ;</span><br><span class="line">            bw.newLine() ;</span><br><span class="line">            bw.flush() ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        bw.close() ;</span><br><span class="line">        br.close() ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="PrintWriter打印输出字符流"><a href="#PrintWriter打印输出字符流" class="headerlink" title="PrintWriter打印输出字符流"></a>PrintWriter打印输出字符流</h2><ul>
<li><p>相当于是<code>System.out.print(&quot;&quot;)</code>,打印输出到文件中.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException &#123;</span><br><span class="line">    <span class="comment">//1.</span></span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;d:/data/number.txt&quot;</span>);</span><br><span class="line">    <span class="comment">//2</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">        pw.println(<span class="string">&quot;第&quot;</span> + i + <span class="string">&quot;个数字&quot;</span>);</span><br><span class="line">        <span class="comment">//			System.out.println(&quot;第&quot; + i + &quot;个数字&quot;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.</span></span><br><span class="line">    pw.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>BufferedReader 和PrintWriter一起使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BufferedReader</span> <span class="variable">bfr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;d:/data/name.txt&quot;</span>);</span><br><span class="line"><span class="comment">//2</span></span><br><span class="line">String s ;</span><br><span class="line">System.out.println(<span class="string">&quot;--input name:&quot;</span>);</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    s = bfr.readLine();</span><br><span class="line">    <span class="keyword">if</span>(s.equals(<span class="string">&quot;q&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pw.println(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//3</span></span><br><span class="line">bfr.close();</span><br><span class="line">pw.close();</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="自动释放资源"><a href="#自动释放资源" class="headerlink" title="自动释放资源"></a>自动释放资源</h2><ul>
<li><p>不用close,系统指定释放资源</p>
</li>
<li><p>前提:<strong>流要继承AutoCloseable;</strong></p>
</li>
<li><p>格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>（声明需要释放的资源）&#123;</span><br><span class="line"></span><br><span class="line">    可能产生异常的语句。</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>(<span class="type">BufferedReader</span> <span class="variable">bfr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;d:/data/name.txt&quot;</span>);</span><br><span class="line">   )&#123;</span><br><span class="line">    <span class="comment">//2</span></span><br><span class="line">    String s ;</span><br><span class="line">    System.out.println(<span class="string">&quot;--input name:&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        s = bfr.readLine();</span><br><span class="line">        <span class="keyword">if</span>(s.equals(<span class="string">&quot;q&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pw.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="文件操作练习"><a href="#文件操作练习" class="headerlink" title="文件操作练习"></a>文件操作练习</h2><h3 id="集合数据存储到文本文件"><a href="#集合数据存储到文本文件" class="headerlink" title="集合数据存储到文本文件"></a>集合数据存储到文本文件</h3><ul>
<li><p>把集合中的数据存储到文本文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 把ArrayList集合中的数据存储到文本文件中</span></span><br><span class="line"><span class="comment">	 * 分析:</span></span><br><span class="line"><span class="comment">	 * 		1: 创建ArrayList集合对象</span></span><br><span class="line"><span class="comment">	 * 		2: 添加数据</span></span><br><span class="line"><span class="comment">	 * 		3: 创建高效的字符输出流对象</span></span><br><span class="line"><span class="comment">	 * 		4: 遍历集合,获取每一个元素,然后通过流对象写出去</span></span><br><span class="line"><span class="comment">	 * 		5: 释放资源</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">    <span class="comment">// 创建ArrayList集合对象</span></span><br><span class="line">    ArrayList&lt;String&gt; al = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;() ;</span><br><span class="line">    <span class="comment">// 添加数据</span></span><br><span class="line">    al.add(<span class="string">&quot;西施&quot;</span>) ;</span><br><span class="line">    al.add(<span class="string">&quot;貂蝉&quot;</span>) ;</span><br><span class="line">    al.add(<span class="string">&quot;杨玉环&quot;</span>) ;</span><br><span class="line">    al.add(<span class="string">&quot;王昭君&quot;</span>) ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建高效的字符输出流对象</span></span><br><span class="line">    <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;names.txt&quot;</span>)) ;</span><br><span class="line">    <span class="comment">// 遍历集合,获取每一个元素,然后通过流对象写出去</span></span><br><span class="line">    <span class="keyword">for</span>(String name : al) &#123;</span><br><span class="line">        bw.write(name) ;</span><br><span class="line">        bw.newLine() ;</span><br><span class="line">        bw.flush() ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 释放资源</span></span><br><span class="line">    bw.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="文本数据存储到集合中"><a href="#文本数据存储到集合中" class="headerlink" title="文本数据存储到集合中"></a>文本数据存储到集合中</h3><ul>
<li><p>把文本文件中的数据存储到集合中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 从文本文件中读取数据(每一行为一个字符串数据)到集合中，并遍历集合</span></span><br><span class="line"><span class="comment">	 * 分析:</span></span><br><span class="line"><span class="comment">	 * 		1: 创建高效的字符输入流对象</span></span><br><span class="line"><span class="comment">	 * 		2: 创建集合对象</span></span><br><span class="line"><span class="comment">	 * 		3: 读取文本文件中的数据,将数据存储到集合中</span></span><br><span class="line"><span class="comment">	 * 		4: 释放资源</span></span><br><span class="line"><span class="comment">	 * 		5: 遍历集合</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="comment">// 1: 创建高效的字符输入流对象</span></span><br><span class="line">	<span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;names.txt&quot;</span>)) ;</span><br><span class="line">	<span class="comment">// 2: 创建集合对象</span></span><br><span class="line">	ArrayList&lt;String&gt; al = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;() ;</span><br><span class="line">	<span class="comment">// 3: 读取文本文件中的数据,将数据存储到集合中</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span> ;	<span class="comment">// 作用: 用来记录读取到的行数据</span></span><br><span class="line">	<span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">		al.add(line) ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 4: 释放资源</span></span><br><span class="line">	br.close() ;</span><br><span class="line">	<span class="comment">// 5: 遍历集合</span></span><br><span class="line">	<span class="keyword">for</span>(String name : al) &#123;</span><br><span class="line">		System.out.println(name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="随机获取文本中姓名"><a href="#随机获取文本中姓名" class="headerlink" title="随机获取文本中姓名"></a>随机获取文本中姓名</h3><ul>
<li><p>随机获取文本文件中的姓名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">	<span class="comment">// 1: 创建集合对象</span></span><br><span class="line">	ArrayList&lt;String&gt; students = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt; () ;</span><br><span class="line">	<span class="comment">// 2: 创建BufferedReader对象</span></span><br><span class="line">	<span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;students.txt&quot;</span>)) ;</span><br><span class="line">	<span class="comment">// 3: 读取数据,把数据存储到集合中</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span> ;</span><br><span class="line">	<span class="keyword">while</span>((line = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">		students.add(line) ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 4: 释放资源</span></span><br><span class="line">	br.close() ;</span><br><span class="line">	<span class="comment">// 5: 生成一个随机数</span></span><br><span class="line">	<span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>() ;</span><br><span class="line">	<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> random.nextInt(students.size());</span><br><span class="line">	<span class="comment">// 6: 把生成的随机数作为集合元素的索引,来获取一个元素</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> students.get(index) ;</span><br><span class="line">	<span class="comment">// 7: 把获取到的元素打印到控制台</span></span><br><span class="line">	System.out.println(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="录入信息并且写入文件"><a href="#录入信息并且写入文件" class="headerlink" title="录入信息并且写入文件"></a>录入信息并且写入文件</h3><ul>
<li><p>键盘录入学生信息按照总分排序并写入文本文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 需求：键盘录入3个学生信息(姓名,语文成绩(chineseScore),数学成绩(mathScore),英语成绩(englishScore)),按照总分从高到低存入文本文件</span></span><br><span class="line"><span class="comment">	 * 分析:</span></span><br><span class="line"><span class="comment">	 * 		1: 创建一个学生类</span></span><br><span class="line"><span class="comment">	 * 		2: 创建一个集合对象TreeSet集合</span></span><br><span class="line"><span class="comment">	 * 		3: 键盘录入学生信息,把学生信息封装到学生对象中,然后把学生对象添加到集合中</span></span><br><span class="line"><span class="comment">	 * 		4: 创建一个高效的字符输出流对象</span></span><br><span class="line"><span class="comment">	 * 		5: 遍历集合,获取每一个元素,把其信息写入到文件中</span></span><br><span class="line"><span class="comment">	 * 		6: 释放资源</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="comment">//  创建一个集合对象TreeSet集合</span></span><br><span class="line">	TreeSet&lt;Student&gt; ts = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;Student&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Student&gt;() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Student s1, Student s2)</span> &#123;</span><br><span class="line">			<span class="comment">// 总分</span></span><br><span class="line">			<span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> s2.getTotalScore() - s1.getTotalScore() ;</span><br><span class="line">			<span class="comment">// 比较姓名</span></span><br><span class="line">			<span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> (num == <span class="number">0</span>) ? s2.getName().compareTo(s1.getName()) : num ;</span><br><span class="line">			<span class="comment">// 返回</span></span><br><span class="line">			<span class="keyword">return</span> num2;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;) ;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 3: 键盘录入学生信息,把学生信息封装到学生对象中,然后把学生对象添加到集合中</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span> ; x &lt;= <span class="number">3</span> ; x++) &#123;</span><br><span class="line">		<span class="comment">// 创建Scanner对象</span></span><br><span class="line">		<span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in) ;</span><br><span class="line">		System.out.println(<span class="string">&quot;请您输入第&quot;</span> + x + <span class="string">&quot;个学生的姓名&quot;</span> );</span><br><span class="line">		<span class="type">String</span> <span class="variable">sutName</span> <span class="operator">=</span> sc.nextLine() ;</span><br><span class="line">		System.out.println(<span class="string">&quot;请您输入第&quot;</span> + x + <span class="string">&quot;个学生的语文成绩&quot;</span> );</span><br><span class="line">		<span class="type">int</span> <span class="variable">chineseScore</span> <span class="operator">=</span> sc.nextInt() ;</span><br><span class="line">		System.out.println(<span class="string">&quot;请您输入第&quot;</span> + x + <span class="string">&quot;个学生的数学成绩&quot;</span> );</span><br><span class="line">		<span class="type">int</span> <span class="variable">mathScore</span> <span class="operator">=</span> sc.nextInt() ;</span><br><span class="line">		System.out.println(<span class="string">&quot;请您输入第&quot;</span> + x + <span class="string">&quot;个学生的英语成绩&quot;</span> );</span><br><span class="line">		<span class="type">int</span> <span class="variable">englishScore</span> <span class="operator">=</span> sc.nextInt() ;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 把学生的信封装到一个学生对象中</span></span><br><span class="line">		<span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>() ;</span><br><span class="line">		s.setName(sutName) ;</span><br><span class="line">		s.setMathScore(mathScore) ;</span><br><span class="line">		s.setChineseScore(chineseScore) ;</span><br><span class="line">		s.setEnglishScore(englishScore) ;</span><br><span class="line">		<span class="comment">// 把学生的信息添加到集合中</span></span><br><span class="line">		ts.add(s) ;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 创建一个高效的字符输出流对象</span></span><br><span class="line">	<span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;student.info&quot;</span>)) ;</span><br><span class="line">	bw.write(<span class="string">&quot;==========================================学生的信息如下====================================================&quot;</span>) ;</span><br><span class="line">	bw.newLine() ;</span><br><span class="line">	bw.flush() ;</span><br><span class="line">	bw.write(<span class="string">&quot;姓名\t\t总分\t\t数学成绩\t\t语文成绩\t\t英语成绩\t\t&quot;</span>) ;</span><br><span class="line">	bw.newLine() ;</span><br><span class="line">	bw.flush() ;</span><br><span class="line">	<span class="keyword">for</span>(Student t : ts) &#123;</span><br><span class="line">		bw.write(t.getName() + <span class="string">&quot;\t\t&quot;</span> + t.getTotalScore() + <span class="string">&quot;\t\t&quot;</span> + t.getMathScore() + <span class="string">&quot;\t\t&quot;</span> + t.getChineseScore() + <span class="string">&quot;\t\t&quot;</span> + t.getEnglishScore()) ;</span><br><span class="line">		bw.newLine() ;</span><br><span class="line">		bw.flush() ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 释放资源</span></span><br><span class="line">	bw.close() ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://fulsun.github.io">凉月</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://fulsun.github.io/p/7e6242c7">https://fulsun.github.io/p/7e6242c7</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://fulsun.github.io" target="_blank">凉月の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/medias/featureimages/013.jpg" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://unpkg.com/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/p/bcd2273a" title="Java深浅拷贝和序列化拷贝"><img class="cover" src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/006.jpg" onerror="onerror=null;src='/medias/detail/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java深浅拷贝和序列化拷贝</div></div></a></div><div class="next-post pull-right"><a href="/p/28d2a77a" title="Java文件操作File和RandomAccessFile"><img class="cover" src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/011.jpg" onerror="onerror=null;src='/medias/detail/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java文件操作File和RandomAccessFile</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/avatar.jpg" onerror="this.onerror=null;this.src='/medias/detail/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">凉月</div><div class="author-info__description">记录生活,分享知识。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/fulsun"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/fulsun" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:fl_6145@163.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">感谢访问本站，若喜欢请收藏 ^_^</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#IO%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E8%BF%B0"><span class="toc-text">IO的基本概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO%E6%B5%81%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">IO流的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">流的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%B5%81%E5%92%8C%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">输入流和输出流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E6%B5%81%E5%92%8C%E5%A4%84%E7%90%86%E6%B5%81"><span class="toc-text">节点流和处理流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IO%E6%B5%81%E5%9F%BA%E7%B1%BB%E6%A6%82%E8%BF%B0"><span class="toc-text">IO流基类概述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E5%92%8C%E5%AD%97%E7%AC%A6"><span class="toc-text">字节和字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%97%E8%8A%82"><span class="toc-text">什么是字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%97%E7%AC%A6"><span class="toc-text">什么是字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-text">区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unicode%E7%BC%96%E7%A0%81"><span class="toc-text">unicode编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E5%AD%97%E8%8A%82"><span class="toc-text">如何获取字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String%E4%B8%AD%E7%BC%96%E8%A7%A3%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-text">String中编解码问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81"><span class="toc-text">字节流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#InputStream"><span class="toc-text">InputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OutputStream"><span class="toc-text">OutputStream</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FileInputStream"><span class="toc-text">FileInputStream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FileOutputStream"><span class="toc-text">FileOutputStream</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#write-%E6%96%B9%E6%B3%95"><span class="toc-text">write()方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81%E5%A4%8D%E5%88%B6%E6%93%8D%E4%BD%9C"><span class="toc-text">字节流复制操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-text">字节流复制文本文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%B5%81%E5%A4%8D%E5%88%B6MP3"><span class="toc-text">字节流复制MP3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6MP3%E6%95%88%E7%8E%87"><span class="toc-text">复制MP3效率</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ObjectInputStream"><span class="toc-text">ObjectInputStream</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AF%B9%E8%B1%A1"><span class="toc-text">反序列化对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ObjectOutputStream"><span class="toc-text">ObjectOutputStream</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95-1"><span class="toc-text">常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%AF%B9%E8%B1%A1"><span class="toc-text">序列化对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-text">字符流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Reader"><span class="toc-text">Reader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Writer"><span class="toc-text">Writer</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#InputStreamReader"><span class="toc-text">InputStreamReader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-text">构造方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#OutputStreamWriter"><span class="toc-text">OutputStreamWriter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E5%BC%8F"><span class="toc-text">构造方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E6%95%B0%E6%8D%AE%E6%96%B9%E6%B3%95"><span class="toc-text">写数据方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%B5%81%E5%A4%8D%E5%88%B6"><span class="toc-text">字符流复制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E5%8D%95%E7%BA%A7%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-text">复制单级文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%8C%87%E5%AE%9A%E5%90%8E%E7%BC%80%E5%90%8D%E7%9A%84%E6%96%87%E4%BB%B6%E5%B9%B6%E4%BF%AE%E6%94%B9%E5%90%8D%E7%A7%B0"><span class="toc-text">复制指定目录下指定后缀名的文件并修改名称</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E8%A7%A3%E5%86%B3"><span class="toc-text">中文乱码解决</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Buffer%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-text">Buffer缓冲流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%93%E5%86%B2%E6%B5%81%E7%9A%84%E7%89%B9%E6%AE%8A%E5%8A%9F%E8%83%BD"><span class="toc-text">缓冲流的特殊功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BufferedInputStream"><span class="toc-text">BufferedInputStream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BufferedOutputStream"><span class="toc-text">BufferedOutputStream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BufferedReader%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-text">BufferedReader字符缓冲流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BufferedWriter%E5%AD%97%E7%AC%A6%E7%BC%93%E5%86%B2%E6%B5%81"><span class="toc-text">BufferedWriter字符缓冲流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E6%95%88%E5%AD%97%E7%AC%A6%E6%B5%81%E5%A4%8D%E5%88%B6"><span class="toc-text">高效字符流复制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PrintWriter%E6%89%93%E5%8D%B0%E8%BE%93%E5%87%BA%E5%AD%97%E7%AC%A6%E6%B5%81"><span class="toc-text">PrintWriter打印输出字符流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90"><span class="toc-text">自动释放资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%BB%83%E4%B9%A0"><span class="toc-text">文件操作练习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%88%B0%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-text">集合数据存储到文本文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%88%B0%E9%9B%86%E5%90%88%E4%B8%AD"><span class="toc-text">文本数据存储到集合中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E8%8E%B7%E5%8F%96%E6%96%87%E6%9C%AC%E4%B8%AD%E5%A7%93%E5%90%8D"><span class="toc-text">随机获取文本中姓名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%95%E5%85%A5%E4%BF%A1%E6%81%AF%E5%B9%B6%E4%B8%94%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-text">录入信息并且写入文件</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/p/94e3914c" title="Import 注册组件"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/008.jpg" onerror="this.onerror=null;this.src='/medias/detail/404.jpg'" alt="Import 注册组件"/></a><div class="content"><a class="title" href="/p/94e3914c" title="Import 注册组件">Import 注册组件</a><time datetime="2024-07-15T22:24:08.000Z" title="发表于 2024-07-15 22:24:08">2024-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/a0c53761" title="Configuration Bean 注册组件"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/012.jpg" onerror="this.onerror=null;this.src='/medias/detail/404.jpg'" alt="Configuration Bean 注册组件"/></a><div class="content"><a class="title" href="/p/a0c53761" title="Configuration Bean 注册组件">Configuration Bean 注册组件</a><time datetime="2024-07-15T21:24:08.000Z" title="发表于 2024-07-15 21:24:08">2024-07-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/65826306" title="Spring5新功能"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/008.jpg" onerror="this.onerror=null;this.src='/medias/detail/404.jpg'" alt="Spring5新功能"/></a><div class="content"><a class="title" href="/p/65826306" title="Spring5新功能">Spring5新功能</a><time datetime="2024-07-14T17:24:08.000Z" title="发表于 2024-07-14 17:24:08">2024-07-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/40bb048a" title="JdbcTemplate与声明式事务"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/013.jpg" onerror="this.onerror=null;this.src='/medias/detail/404.jpg'" alt="JdbcTemplate与声明式事务"/></a><div class="content"><a class="title" href="/p/40bb048a" title="JdbcTemplate与声明式事务">JdbcTemplate与声明式事务</a><time datetime="2024-07-14T11:24:08.000Z" title="发表于 2024-07-14 11:24:08">2024-07-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/92933cdb" title="Spring-AOP编程"><img src= "/medias/detail/load.gif" data-lazy-src="/medias/featureimages/012.jpg" onerror="this.onerror=null;this.src='/medias/detail/404.jpg'" alt="Spring-AOP编程"/></a><div class="content"><a class="title" href="/p/92933cdb" title="Spring-AOP编程">Spring-AOP编程</a><time datetime="2024-07-14T09:24:38.000Z" title="发表于 2024-07-14 09:24:38">2024-07-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 凉月</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://unpkg.com/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.js"></script><script src="https://unpkg.com/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null

  const initWaline = (Fn) => {
    const waline = Fn(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline-fulsun.netlify.app/.netlify/functions/comment',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: false,
    }, null))

    const destroyWaline = () => {
      waline.destroy()
    }

    btf.addGlobalFn('pjax', destroyWaline, 'destroyWaline')
  }

  const loadWaline = async () => {
    if (initFn) initWaline(initFn)
    else {
      await getCSS('https://unpkg.com/@waline/client@3.1.2/dist/waline.css')
      const { init } = await import('https://unpkg.com/@waline/client@3.1.2/dist/waline.js')
      initFn = init || Waline.init
      initWaline(initFn)
      window.walineFn = initFn
    }
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://unpkg.com/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>